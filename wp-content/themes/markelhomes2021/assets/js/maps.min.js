var zoom,icon,lat,lng,winW=window.innerWidth;winW<=576?(zoom=10.5,icon=.5,lat=-105.119,lng=40.0635):winW<=768?(zoom=10.5,icon=.5,lat=-105.119,lng=40.1591):(zoom=11,icon=.5,lat=-105.119,lng=40.0635),mapboxgl.accessToken="pk.eyJ1IjoiYnBkYXZpczgxIiwiYSI6ImNrcTQwbDR4NTByZGgycG56N3pkMDB1NGMifQ.5qgmUy3sOAsi5vEhcV3Rmg";var map=new mapboxgl.Map({container:"communityMap",style:"mapbox://styles/bpdavis81/ckrp3kz1jdsld17orqxzahw1y",zoom:zoom,center:[lat,lng]}),nav=new mapboxgl.NavigationControl;map.scrollZoom.disable(),map.on("load",(function(){map.addSource("communities",{type:"vector",url:"mapbox://bpdavis81.ckrr8ga4n131t20lanhopp3vh-1yv28"}),map.addLayer({id:"communities",type:"symbol",source:"communities",layout:{visibility:"visible","icon-image":"map-pin","icon-size":icon,"icon-allow-overlap":!0},"source-layer":"Markel_Homes"})})),map.on("click",(function(o){var i=map.queryRenderedFeatures(o.point,{layers:["communities"]});if(i.length){var e=i[0],a=e.properties.title,t=a.replace(" ","-");t=t.toLowerCase();var p=e.properties.address,s=(e.properties.phone,e.properties.product),n=(e.properties.footage,e.properties.bed,e.properties.bath,e.properties.pricing,e.properties.image),r=e.properties.directions,c='<div class="community-popup popup">';n&&(c+='<picture class="popup-image"><img src="'+n+'" class="img-fluid" alt="'+a+'" /></picture>'),c+='<div class="community-details"><h3 class="community-name">'+a+'</h2><p class="community-address">'+p+'</p><p class="community-info"><span class="product-txt">'+s+"</span><br/>",r&&(c+='<p class="community-info"><a href="'+r+'" class="btn outline-btn white-btn" target="_blank" title="Directions to '+a+'">get directions</a></p>'),c+="</div>";new mapboxgl.Popup({offset:[0,0]}).setLngLat(e.geometry.coordinates).setHTML(c).addTo(map)}}));